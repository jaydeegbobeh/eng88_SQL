
# Database

An organised collection of structured information/ data, typically stored electronically in a computer system.

You must be able to structure tables to contain the right type of information, so that we can query it.
- What common themes or labels can you give the information?
	- e.g for employees: first name, last name, DOB, position

Terminology
Column - database tables are composed of individual columns corresponding to the attributes of the object.
Row - a row consists of one set of attributes corresponding to on instance that a table describes. AKA Records or Tuples
Table - a table is a predefined format of rows and columns that define an entity. AKA file.
- There could be many tables in a database 
DBMS - A DataBase Management System allows a computer to perform database functions of storin, retrieving, adding, deleting and modifying data.


## Types of Database
Flat-file Database
- Stores everything in one table. Good for small number of records related to a single topic

Relational Database
A collection of data items with pre-defined relationships between them for easy access.
- Allows you to separate masses of data into numerous tables
- They are linked to each other by keys

Big Data
- MongoDB, Vertica
- Used for Data Analytics and Business Intelligence
- Digital Age and Internet of Things
- Most flexible

## Relational Database

Relationship types:
- One to one
	- each row in table x is linked to no more than one row in table y, this is an attribute of the relationship not the tables
	- e.g each student has one row in a contact-info table
- One to many
	- each row in the table can be related to many rows in the table it's related to
	- allows frequently used info to be saved only once in a table and referenced many times in all other tables
	
- Many to many 
	- one or more rows in a table can be related to many rows in another table
	
## Primary key

- Uniquely identifies each record in the table
- Each table can have more tha one columns that's part of its primary key (composite key) e.g order number, order line number
- It could be an attribute that is unique like NI number or something that is generated by the DBMS
- DBMS enforces the uniqueness of the Primary Key - no repeated records.

### Primary key constraints
- Must be unique
- Must always have an entry
- Value must never change
- Each table may have a maximum of one primary key

## Foreign Key

- Relationships exist between tables in most database structures, foreign keys are used to create solid relationships.
- Foreign keys ensure that the row of information in Table A corresponds to the correct row of info in table B
- Constraints is used to prevent actions that would destroy links between tables
- Also prevents invalid data from being inserted into the foreign key column - it must be one of the values contained in the table it points to
- No uniqueness constraints for foreign keys
- No limit to amount of keys
- A row cannot be deleted from a reference table if it is in use via a foreign key
- e.g 

## Database software

Microsoft Access - can handle small amount of data
MySQL - PHP
Redis 
mongoDB
Oracle Advanced Analytics


# SQL - Structured Query Language

Data Manipulation Language
Data Definition Language
Data Control Language
Transaction Control Language

DML - for the data
- SELECT
- INSERT
- UPDATE
- dELETE

DDL- for the database itself
- CREATE
- ALTER
- DROP
- TRUNCATE

DCL
- GRANT
- REVOKE

TCL
- COMMIT
- ROLLBACK
- SAVEPOINT

Possible interview question: "What is SQL and what are the different types of SQL?"

## SQL commands

- CREATE DATABASE password_db
- SELECT * FROM `user_table`:
- INSERT INTO `user_table` (`user_id`, `first_name`, `last_name`, `birthdate`) VALUES (NULL, 'user1', 'user1 lastname', '2021-06-08');
- INSERT INTO `user_table` (`user_id`, `first_name`, `last_name`, `birthdate`) VALUES (NULL, 'user2', 'user2 lastname', '2014-06-09');
- SELECT * FROM `user_table` WHERE `user_id` =1
- INSERT INTO `user_table` (`user_id`, `first_name`, `last_name`, `birthdate`) VALUES (NULL, 'user3', 'user3 lastname', '2002-09-23');
- INSERT INTO `user_table` (`user_id`, `first_name`, `last_name`, `birthdate`) VALUES (NULL, 'user2', 'user2 lastname', '2002-09-23');
- SELECT * FROM `user_table` WHERE `first_name` = 'user2' AND `user_id` = 3
- SELECT * FROM `user_table` WHERE `first_name` = 'user2' OR `user_id` = 3
- UPDATE `user_table` SET `first_name`='Mike' WHERE `user_id` =1
- UPDATE `user_table` SET `last_name`='Smith' WHERE `user_id` =1
- UPDATE `user_table` SET `first_name`='John', `last_name` = 'Adams' WHERE `user_id` =3
- UPDATE `user_table` SET `first_name` = 'Mike', `last_name` = 'Smith' WHERE `user_id` =4
- UPDATE `user_table` SET `first_name`='Adam' WHERE `first_name`='Mike'

From zsh shell

docker exec -it mysql_dbms mysql -u root -p 
SHOW DATABASES;
- Shows all of your databases 

USE password_db
SHOW TABLES;
- Show all the tables in the password_db database
DESCRIBE user_table;
- Shows the columns in table, with their type (VAR, INT, TEXT etc)

SELECT * FROM user_table;
- Shows rows and columns in table


## Updating database with Python 
e.g
```python
from mysql.connector import connect, Error

user_fname = input("Please enter your first name:\n")
user_lname = input("PLease enter your last name:\n")
user_bdate = input("Please enter your birth day (DD):\n")
user_bmonth = input("Please enter your birth month (MM):\n")
user_byear = input("Please enter your birth year (YYYY):\n")


try:
  with connect(host="localhost", user="root", password="my_secret_password", database="password_db") as connection:
    print(connection)
    with connection.cursor() as cursor:
      command= f"INSERT INTO `user_table` (`user_id`, `first_name`, `last_name`, `birthdate`) VALUES (NULL,'{user_fname>
      cursor.execute(command)
      #cursor.execute("SELECT * FROM user_table;")
      connection.commit()
      for item in cursor:
        print(item)

except Error as e:
  print(e)
```


